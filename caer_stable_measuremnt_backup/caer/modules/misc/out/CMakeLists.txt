IF (NOT ENABLE_FILE_OUTPUT)
	SET(ENABLE_FILE_OUTPUT 0 CACHE BOOL "Enable the file output module")
ENDIF()

IF (NOT ENABLE_NETWORK_OUTPUT)
	SET(ENABLE_NETWORK_OUTPUT 0 CACHE BOOL "Enable the network output modules (TCP server, TCP, UDP, UnixSockets)")
ENDIF()

IF (ENABLE_FILE_OUTPUT)
	SET(CAER_COMPILE_DEFINITIONS ${CAER_COMPILE_DEFINITIONS} -DENABLE_FILE_OUTPUT=1)

	SET(CAER_FILE_OUTPUT_FILES modules/misc/out/output_common.c modules/misc/out/file.c)

	SET(CAER_C_SRC_FILES ${CAER_C_SRC_FILES} ${CAER_FILE_OUTPUT_FILES})
ENDIF()

IF (ENABLE_NETWORK_OUTPUT)
	SET(CAER_COMPILE_DEFINITIONS ${CAER_COMPILE_DEFINITIONS} -DENABLE_NETWORK_OUTPUT=1)

	SET(CAER_NETWORK_OUTPUT_FILES
		modules/misc/out/output_common.c
		modules/misc/out/net_tcp_server.c
		modules/misc/out/net_tcp.c
		modules/misc/out/net_udp.c
		modules/misc/out/unixs.c)

	SET(CAER_C_SRC_FILES ${CAER_C_SRC_FILES} ${CAER_NETWORK_OUTPUT_FILES})
ENDIF()

# Propagate change to parent scope only once.
SET(CAER_C_SRC_FILES ${CAER_C_SRC_FILES} PARENT_SCOPE)
SET(CAER_COMPILE_DEFINITIONS ${CAER_COMPILE_DEFINITIONS} PARENT_SCOPE)
